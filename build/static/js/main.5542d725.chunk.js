(this["webpackJsonpantd-demo"]=this["webpackJsonpantd-demo"]||[]).push([[0],{169:function(e,t,n){},170:function(e,t,n){},199:function(e,t){},308:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),s=n.n(c),o=(n(169),n(107)),i=n(55),u=n.n(i),d=n(106),f=n(49),l=(n(170),n(314)),b=n(17),h=n(313),m=n(50),v=n(312),j=n(311),p=n(152),y=n.n(p),x=n(21),O=n.n(x),g=(n(171),n(147)),k=n(148),w=n(149),Y=n(159),S="uskjVVXAg5csX5P40bXnivo",C="viwaZHVHwVMRJ",I=function(){function e(t){Object(g.a)(this,e);var n=new w.Vika({token:S,fieldKey:"name",requestTimeout:6e4,host:"https://api.vika.cn/fusion/v1"});this.datasheet=n.datasheet("dstffTNeWj0bK9CUAB")}return Object(k.a)(e,[{key:"getList",value:function(e){var t=this;return new Promise((function(e,n){t.datasheet.records.query({viewId:C}).then((function(t){t.success?(Y.b.success("\u83b7\u53d6\u5217\u8868\u6210\u529f"),e(t.data)):Y.b.error(t.message)})).catch((function(e){Y.b.error(e)}))}))}},{key:"getQuery",value:function(e){var t=e.viewId,n=e.sort,a=e.recordIds,r=e.fields,c=e.filterByFormula,s=e.maxRecords,o=e.cellFormat,i=e.fieldKey;this.datasheet.record.query({viewId:t,sort:n,recordIds:a,fields:r,filterByFormula:c,maxRecords:s,cellFormat:o,fieldKey:i})}},{key:"queryAll",value:function(){var e=this;return new Promise((function(t,n){e.datasheet.records.queryAll().then((function(e){e.success?(Y.b.success("\u83b7\u53d6\u5217\u8868\u5168\u90e8\u6210\u529f"),t(e.data)):Y.b.error(e.message)})).catch((function(e){Y.b.error(e)}))}))}},{key:"add",value:function(e){var t=this;return new Promise((function(n,a){t.datasheet.records.create(e).then((function(e){e.success?(Y.b.success("\u65b0\u589e\u6210\u529f"),n(e.data)):Y.b.error(e.message)})).catch((function(e){Y.b.error(e)}))}))}},{key:"update",value:function(e){var t=this;return new Promise((function(n,a){t.datasheet.records.update(e).then((function(e){e.success?(Y.b.success("\u66f4\u65b0\u6210\u529f"),n(e.data)):Y.b.error(e.message)})).catch((function(e){Y.b.error(e)}))}))}},{key:"del",value:function(e){var t=this;return new Promise((function(n,a){t.datasheet.records.delete(e).then((function(e){e.success?(Y.b.success("\u5220\u9664\u6210\u529f"),n(e.data)):Y.b.error(e.message)})).catch((function(e){Y.b.error(e)}))}))}},{key:"upload",value:function(e){var t=this;return new Promise((function(n,a){t.datasheet.records.upload(e).then((function(e){e.success?(Y.b.success("\u4e0a\u4f20\u6210\u529f"),n(e.data)):Y.b.error(e.message)})).catch((function(e){Y.b.error(e)}))}))}}]),e}(),H=n(25);O.a.locale("zh-cn");var M=new I,P=function(){var e=r.a.useState(!1),t=Object(f.a)(e,2),n=t[0],a=t[1],c=r.a.useState(!1),s=Object(f.a)(c,2),i=s[0],p=(s[1],r.a.useState("")),x=Object(f.a)(p,2),g=x[0],k=x[1],w=r.a.useState(""),Y=Object(f.a)(w,2),S=Y[0],C=Y[1],I=r.a.useState([]),P=Object(f.a)(I,2),D=P[0],F=P[1],q=r.a.useState(-1),A=Object(f.a)(q,2),B=A[0],L=A[1],R=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{fields:{"\u6807\u9898":t.text,"\u5f00\u59cb\u65f6\u95f4":t.timeStamp,data:t.data}}],e.next=3,M.add(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,c,s,i,d,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=D.findIndex((function(e){return O()(g).isSame(O()(e.fields["\u5f00\u59cb\u65f6\u95f4"]),"day")})),n=T(S[0],S[1]),r=Object(f.a)(n,2),c=r[0],s=r[1],i="\u6253\u5361\u65f6\u95f4".concat(c,",\u6253\u5361\u65f6\u957f").concat(s),d=O()(g).format(),-1===t){e.next=10;break}return l=D[t].recordId,e.next=8,M.update([{recordId:l,fields:{"\u6807\u9898":i,"\u5f00\u59cb\u65f6\u95f4":d}}]);case 8:e.next=12;break;case 10:return e.next=12,R({text:i,timeStamp:d});case 12:return F(Object(o.a)(D)),C(),a(!1),e.next=17,J();case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){console.log("Clicked cancel button"),a(!1)},T=function(e,t){var n,a,r,c=O()(e,"YYYY-MM-DD HH:mm:ss"),s=O()(t,"YYYY-MM-DD HH:mm:ss");return n=s.diff(c,"seconds"),r=parseInt(n/60/60),a=Math.round((n-60*r*60)/60),["".concat(c.format("HH:mm"),"--").concat(s.format("HH:mm")),"".concat(O()(g).format("YYYY-MM-DD"),",").concat(r,"\u5c0f\u65f6").concat(a,"\u5206")]},J=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.getList();case 2:t=e.sent,D.splice.apply(D,[0,D.length].concat(Object(o.a)(t.records))),console.log(D),F(Object(o.a)(D));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(H.jsx)(b.a,{locale:y.a,children:Object(H.jsxs)("div",{className:"App",children:[Object(H.jsx)(h.a,{title:"\u6253\u5361",visible:n,onOk:V,confirmLoading:i,onCancel:K,footer:[Object(H.jsx)(m.a,{onClick:K,children:"\u53d6\u6d88"},"back"),Object(H.jsx)(m.a,{type:"primary",onClick:V,children:-1===B?"\u6dfb\u52a0":"\u4fee\u6539"},"submit"),Object(H.jsx)(m.a,{type:"danger",style:{display:-1!==B?"inline-block":"none"},onClick:function(){},children:"\u5220\u9664"},"del")],children:Object(H.jsx)(v.a.RangePicker,{value:S,onChange:function(e){console.log(O()(g).format("YYYYMMDD")),L(),C(e)},showNow:!0})}),Object(H.jsx)(m.a,{onClick:J,children:"\u66f4\u65b0"}),Object(H.jsx)(j.a,{dateCellRender:function(e){var t=function(e){for(var t=0;t<D.length;t++){var n=D[t];if(O()(e).isSame(O()(n.fields["\u5f00\u59cb\u65f6\u95f4"]),"day"))return n}}(e);if(void 0!==t)return console.log(t),Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(l.a,{status:"success",text:t.fields["\u6807\u9898"]})})},onSelect:function(e){a(!0),k(e);var t=D.findIndex((function(t){return O()(e).isSame(O()(t.fields["\u5f00\u59cb\u65f6\u95f4"]),"day")}));L(t)}})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,315)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(H.jsx)(P,{}),document.getElementById("root")),D()}},[[308,1,2]]]);
//# sourceMappingURL=main.5542d725.chunk.js.map